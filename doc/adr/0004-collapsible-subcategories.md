# ADR 0004: Розкривні підкатегорії та групи сервісів

- **Статус:** Accepted
- **Дата:** 2025-09-21
- **Повʼязані PR:** #4 `codex/expand-subcategories-to-match-categories`

## Контекст
Зі збільшенням кількості сервісів у категоріях стало важко проглядати довгі списки — елементи виходили за межі екрана, а користувачі втрачали контекст. Потрібно було зберегти компактність мапи й одночасно дозволити заглиблюватися в потрібні блоки.

## Рішення
- Запровадити структуру `group` → `items` для підгруп із власними заголовками.
- Зберігати стан розгортання груп окремо для кожної мови та категорії через `Map` + `Set`, щоб перемикання мов не губило контекст.
- Відображати групи як окремі вузли з можливістю відкриття/закриття клацанням і клавіатурою.
- Перераховувати вагу категорій з урахуванням відкритих груп, щоб канва адаптувалася до нової висоти.

## Наслідки
- ✅ Користувачі бачать компактний огляд і розгортають лише потрібні підрозділи.
- ✅ Архітектура даних дозволяє додавати гнучкі сценарії (наприклад, тематичні плейбуки).
- ⚠️ Логіка підрахунку ваги категорії стала складнішою; потрібні unit-тести або smoke-тести при зміні структури.
- ⚠️ Необхідно контролювати, щоб усі нові елементи мали унікальні назви груп для коректного кешування стану.
